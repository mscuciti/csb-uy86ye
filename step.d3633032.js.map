{"version":3,"sources":["src/01_mix/step.coffee"],"names":[],"mappings":";CAAA,WAAA,IAAA,EAAA,EAAA,EAAA,EAAA,EAAK,OAAO,GAEZ,EAAM,SAAC,GACL,OAAA,KAAK,IAAI,IAEX,EAAO,SAAC,GACN,OAAA,KAAK,KAAK,IAEZ,EAAG,OAAO,MAAQ,CAAA,KAAM,WACxB,IAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAYE,GAZG,KAAC,EAAI,OACC,SAAS,eAAe,UAC7B,EAAM,SAAS,cAAc,QACzB,GAAK,MACT,EAAI,UAAY,MAChB,SAAS,KAAK,YAAY,KACT,IAAlB,EAAG,SAAS,GAAa,KAAC,SAAU,EAClC,KAAC,SAAU,EAEhB,EAAI,IAGiB,KAFrB,EAAU,KAAC,eAAe,GAAG,IAElB,OAAiB,KAAC,SAAU,OAKrC,GAHA,KAAC,SAAU,EACX,KAAC,SAAU,EAEG,SAAX,KAAC,OACF,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,EAAA,EAAA,IA3BN,EAAA,EAAA,GA4BiB,KAAA,IAAC,EAAO,GAAI,GAAZ,KAAA,IAAgB,EAAO,GAAI,GAEhC,IACJ,EADI,IACI,EAAI,EAAO,GAAG,GAAG,EAAK,EAAO,IAAI,EACzC,EAFI,IAEI,EAAI,EAAO,GAAG,GAAG,EAAK,EAAO,IAAI,EACtC,EAAI,GAAM,EAAI,EAAO,MACtB,KAAC,GAAK,GACL,EAAI,GAAM,EAAI,EAAO,MACtB,KAAC,GAAK,GAWd,YATY,IAAT,KAAC,KAAwB,KAAC,KAAO,EAAQ,KAAC,OAE7C,KAAC,UAAY,IACC,QAAX,KAAC,QACC,EAAG,MAAQ,KAAC,QAAU,KAAC,YACxB,KAAC,OAAS,QACd,EAAe,EAAI,EAAG,MAAM,EAAI,EAChC,EAAgB,EAAI,EAAG,MAAM,EAAI,EACjC,EAAG,KAAO,EAAO,KAAC,EAAG,EAAG,KAAM,EAAG,MAAM,EAAG,EAAG,MAAM,EAAG,GACtD,EAAG,KAAO,EAAO,KAAC,EAAG,EAAG,KAAM,EAAG,MAAM,EAAG,EAAG,MAAM,EAAG,KAExD,EAAS,SAAC,EAAI,EAAO,EAAU,EAAU,GAEvC,OAAG,EAAK,EACN,EACM,EAAK,EAAW,EACtB,EAAW,EACL,EAAK,EAAQ,EAAW,EAC9B,EAAK,EAAS,EACR,EAAK,EAAQ,EACnB,EAAK,EAEL,GAEJ,EAAG,OAAO,KAAO,CAAA,KAAM,WAQrB,OANG,EAAG,MAAQ,KAAO,IACnB,KAAC,OAAS,GAAK,KAAK,SAAW,IAC/B,KAAC,OAAS,GAAK,KAAK,SAAW,KAE9B,KAAC,QAAU,EAAO,KAAC,OAAO,QACrB,KAAC,OAAS,IAAO,KAAC,OAAO,aACrB,IAAT,KAAC,KAAwB,KAAC,KAAO,EAAQ,KAAC,WAtE/C,KAAA","file":"step.d3633032.js","sourceRoot":"..","sourcesContent":["gm = window.gm\n\nabs = (n) ->\n  Math.abs(n)\n\nsign = (n) ->\n  Math.sign(n)\n\ngm.mixins.chara = step: ->\n  if @x > 1700\n    if not document.getElementById('win')\n      win = document.createElement('div')\n      win.id = 'win'\n      win.className = 'win'\n      document.body.appendChild(win)\n  if gm.keyboard[0] == 0 then @walking = false\n  else @walking = true\n  # go towards other obj\n  r = 100\n  vectors = @checkCollision(r)[1]\n  # check if caught in gravity well \n  if vectors.length == 0 then @running = false\n  else \n    @running = true\n    @walking = true\n    # move \n    if @status == 'blue'\n      for vector in vectors\n        square = (vector[0]**2)+(vector[1]**2)\n        # strength\n        q = 1.5\n        dx =  q*abs(vector[0]-r)*sign(vector[0])/r\n        dy =  q*abs(vector[1]-r)*sign(vector[1])/r\n        if abs(dx) < abs(vector[0])\n          @x += dx\n        if abs(dy) < abs(vector[1])\n          @y += dy\n  # animation\n  if @tick == undefined then (@tick = 0) else @tick++\n  # states\n  @painTicks = 100\n  if @status == 'red'\n    if gm.ticks > @frame_0 + @painTicks\n      @status = 'blue'\n  quarterWidth = 3 * gm.vport.w / 8\n  quarterHeight = 3 * gm.vport.h / 8\n  gm.offX = scroll(@x, gm.offX, gm.level.w, gm.vport.w, quarterWidth)\n  gm.offY = scroll(@y, gm.offY, gm.level.h, gm.vport.h, quarterHeight)\n\nscroll = (xy, offXY, sizeRoom, sizeView, margin) ->\n  # check room boundaries\n  if xy < margin\n    0\n  else if xy > sizeRoom - margin\n    sizeRoom - sizeView\n  else if xy > offXY + sizeView - margin\n    xy + margin - sizeView\n  else if xy < offXY + margin\n    xy - margin\n  else\n    offXY\n\ngm.mixins.prey = step: ->\n  # motion\n  if gm.ticks % 350 == 0\n    @xSpeed = 5 * (Math.random() - 0.5)\n    @ySpeed = 5 * (Math.random() - 0.5)\n  # states\n  if @xSpeed >= 0 then @status='right'\n  else if @xSpeed < 0 then @status='left'\n  if @tick == undefined then (@tick = 0) else @tick++\n\n# ---\n# generated by js2coffee 2.2.0"]}