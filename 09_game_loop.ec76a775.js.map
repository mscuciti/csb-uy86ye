{"version":3,"sources":["src/09_game_loop.coffee"],"names":[],"mappings":";CACkB,WAAA,IAAA,EAAA,EAClB,EAAK,OAAO,GACZ,EAAM,EAAG,OAET,EAAG,IAAI,KAAO,WACd,IAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAeE,IAAA,KAZA,EAAM,SAAC,EAAG,EAAG,EAAI,EAAI,GACvB,IAAA,EAAA,EAAI,GAAG,KAAK,EACN,OAAO,EAAE,GAAG,EAAI,EAAI,GACtB,IAAA,KAAA,EAAA,GAAA,CACE,GAAG,KAAK,EACN,OAAO,EAAE,GAAG,EAAI,EAAI,GAEpB,IAAA,KAAA,EACE,GAAG,KAAK,EACN,OAAO,EAAE,GAAG,EAAI,EAAI,KAG9B,EAAA,IACE,IAAA,KAAA,EAAA,IAAA,GAEE,GAAkB,KADlB,EAAO,EAAG,IAAI,GAAG,IACT,OAGN,IAFA,EAAI,MAAO,GACX,EAAI,EACE,EAAI,IACR,EAAI,OAAS,EAAG,GAChB,IAGR,IADA,EAAI,EACE,EAAI,EAAG,WAAW,QACtB,EAAG,WAAW,GAAK,EACnB,EAAG,YAAY,GAAK,EACpB,IAEF,IAAA,KAAA,EAAA,IACE,IAAA,KAAA,EAAA,IAAA,GAEoB,KADlB,EAAO,EAAG,IAAI,GAAG,IACT,SACN,EAAI,aAAc,GAClB,EAAI,OAAQ,GAEZ,EAAK,WAAa,EAAK,OACvB,EAAK,OAAS,EAAI,cAAe,GAC9B,EAAK,SAAU,EAAK,aACrB,EAAK,KAAO,GACd,EAAI,UAAW,EAAM,EAAK,KAAM,EAAK,eACrC,EAAI,OAAQ,GACZ,EAAI,UAAW,IAGrB,IAAA,KAAA,EAAA,GAAA,EAAA,IApDgB,EAAA,KAAA,WAAA,IAAA,EAqDd,IAAA,KAAA,EAAA,GAAA,EAAA,IAAA,GAEoB,KADlB,EAAO,EAAG,IAAI,GAAG,IACT,QACN,EAAK,GAAK,EAAK,OACf,EAAA,KAAA,EAAK,GAAK,EAAK,SAzDL,EAAA,UAAA,GAAA,OAAA,EAAA,IAAA,OAAA,KAAA,KAAA","file":"09_game_loop.ec76a775.js","sourceRoot":"..","sourcesContent":["# global game loop\r\n# call every frame\r\ngm = window.gm\r\nmix = gm.mixins\r\n\r\ngm.fnc.loop = ->\r\n  # read inputs + do keyboard arrays\r\n  # keep js from freaking out..\r\n\r\n  tri = (f, i, a0, a1, a2) ->\r\n    if f of i\r\n      return i[f](a0, a1, a2)\r\n    for g of mix[f]\r\n      if g of i\r\n        return i[g](a0, a1, a2)\r\n      else\r\n        for h of g\r\n          if h of i\r\n            return i[h](a0, a1, a2)\r\n    return\r\n\r\n  for i of gm.ins\r\n    for j of gm.ins[i]\r\n      inst = gm.ins[i][j]\r\n      if inst.active == 1\r\n        tri 'key', inst\r\n        n = 0\r\n        while n < 10\r\n          tri 'key_' + n, inst\r\n          n++\r\n\r\n  i = 0\r\n  while i < gm.keyPressed.length\r\n    gm.keyPressed[i] = 0\r\n    gm.keyReleased[i] = 0\r\n    i++\r\n  # run step code\r\n  for i of gm.ins\r\n    for j of gm.ins[i]\r\n      inst = gm.ins[i][j]\r\n      if inst.active == 1\r\n        tri 'checkTimer', inst\r\n        tri 'step', inst\r\n        # reset animation frame on sprite change\r\n        inst.lastSprite = inst.sprite\r\n        inst.sprite = tri('spriteTable', inst)\r\n        if inst.sprite != inst.lastSprite\r\n          inst.tick = 0\r\n        tri 'animate', inst, inst.tick, inst.ticksPerFrame\r\n        tri 'move', inst\r\n        tri 'checkHP', inst\r\n\r\n  # movement\r\n  for i of gm.ins\r\n    for j of gm.ins[i]\r\n      inst = gm.ins[i][j]\r\n      if inst.active == 1\r\n        inst.x += inst.xSpeed\r\n        inst.y += inst.ySpeed\r\n\r\n# ---\r\n# generated by js2coffee 2.2.0"]}